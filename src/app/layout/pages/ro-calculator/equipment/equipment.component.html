<p-fluid>
  <div class="grid grid-cols-12">
    <div class="col-span-3">
      <div class="grid grid-cols-12">
        <div class="col-span-12" style="display: block; position: relative">
          <p-select
            inputId="baseItem"
            [autoDisplayFirst]="false"
            [resetFilterOnHide]="true"
            [options]="itemList"
            [filter]="true"
            filterBy="label"
            scrollHeight="350px"
            [(ngModel)]="itemId"
            [showClear]="true"
            (onChange)="onSelectItem('itemId', $event.value, itemRefine)"
            (onClear)="onClearItem(itemType)"
            placeholder="{{ placeholder }}"
          >
            <ng-template #selectedItem let-item>
              <div class="flex gap-1 item_template">
                <img src="assets/demo/images/items/{{ item.value }}.png" alt="" class="item_img" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
            <ng-template #item let-item>
              <div class="flex gap-1 {{ item.lv200ClassName }}">
                <img src="assets/demo/images/items/{{ item.value }}.png" alt="" style="width: 19px" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
          </p-select>
          <label *ngIf="overlayLabel" for="baseItem" class="item_float_label" style="position: absolute; top: -1.5rem">{{ overlayLabel }}</label>
        </div>
        <div class="col-span-6 col-end-9" [hidden]="!gradeList.length || !itemId">
          <p-select
            [options]="gradeList"
            scrollHeight="350px"
            [showClear]="true"
            [(ngModel)]="itemGrade"
            (onChange)="onSelectGrade($event.value)"
            (onClear)="onSelectGrade('')"
            placeholder="ungrade"
          ></p-select>
        </div>
        <div class="col-span-4 col-end-13" style="min-width: 70px" *ngIf="refineList.length > 0">
          <p-select
            inputId="baseItemRefine"
            [options]="refineList"
            [(ngModel)]="itemRefine"
            scrollHeight="350px"
            [disabled]="!itemId"
            (onChange)="onSelectItem('itemRefine', itemId, $event.value)"
          >
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex gap-1">
                <div>{{ item.label > 0 ? '+ ' : '' }} {{ item.label || 0 }}</div>
              </div>
            </ng-template>
          </p-select>
        </div>
        <ng-content></ng-content>
      </div>
    </div>
    <div class="col-span-9">
      <div class="grid grid-cols-12">
        <div class="col-span-4" [hidden]="totalCardSlots < 1">
          <p-select
            inputId="baseItemCard1"
            [autoDisplayFirst]="false"
            [resetFilterOnHide]="true"
            [options]="cardList"
            [filter]="true"
            filterBy="label,cardPrefix"
            scrollHeight="350px"
            [(ngModel)]="card1Id"
            [disabled]="!itemId"
            [showClear]="true"
            (onChange)="onSelectItem('card1Id', $event.value)"
            placeholder="Card{{ isWeapon ? ' 1' : '' }}"
          >
            <ng-template *ngIf="!isHeadCardable" let-item pTemplate="selectedItem">
              <div class="flex gap-1 item_template" *ngIf="card1Id">
                <img src="assets/demo/images/items/card.png" alt="" class="item_img" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>

            <ng-template *ngIf="isHeadCardable" let-item pTemplate="selectedItem">
              <div class="flex gap-1 item_template" *ngIf="card1Id">
                <img src="assets/demo/images/items/{{ item.value }}.png" alt="" class="item_img" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
            <ng-template *ngIf="isHeadCardable" let-item pTemplate="item">
              <div class="flex gap-1">
                <img src="assets/demo/images/items/{{ item.value }}.png" alt="" style="width: 19px" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
          </p-select>
        </div>
        <div class="col-span-4" [hidden]="totalCardSlots < 2">
          <p-select
            inputId="baseItemCard2"
            [autoDisplayFirst]="false"
            [resetFilterOnHide]="true"
            [options]="cardList"
            [filter]="true"
            filterBy="label,cardPrefix"
            scrollHeight="350px"
            [(ngModel)]="card2Id"
            [disabled]="!itemId"
            [showClear]="true"
            (onChange)="onSelectItem('card2Id', $event.value)"
            placeholder="Card 2"
          >
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex gap-1 item_template" *ngIf="card2Id">
                <img src="assets/demo/images/items/card.png" alt="" class="item_img" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
          </p-select>
        </div>
        <div class="col-span-4" [hidden]="totalCardSlots < 3">
          <p-select
            inputId="baseItemCard3"
            [autoDisplayFirst]="false"
            [resetFilterOnHide]="true"
            [options]="cardList"
            [filter]="true"
            filterBy="label,cardPrefix"
            scrollHeight="350px"
            [(ngModel)]="card3Id"
            [disabled]="!itemId"
            [showClear]="true"
            (onChange)="onSelectItem('card3Id', $event.value)"
            placeholder="Card3"
          >
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex gap-1 item_template" *ngIf="card3Id">
                <img src="assets/demo/images/items/card.png" alt="" class="item_img" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
          </p-select>
        </div>
        <div class="col-span-4" [hidden]="totalCardSlots < 4">
          <p-select
            inputId="baseItemCard3"
            [autoDisplayFirst]="false"
            [resetFilterOnHide]="true"
            [options]="cardList"
            [filter]="true"
            filterBy="label,cardPrefix"
            scrollHeight="350px"
            [(ngModel)]="card4Id"
            [disabled]="!itemId"
            [showClear]="true"
            (onChange)="onSelectItem('card4Id', $event.value)"
            placeholder="Card 4"
          >
            <ng-template let-item pTemplate="selectedItem">
              <div class="flex gap-1 item_template" *ngIf="card4Id">
                <img src="assets/demo/images/items/card.png" alt="" class="item_img" />
                <div>{{ item.label }}</div>
              </div>
            </ng-template>
          </p-select>
        </div>
        <div class="col-span-4" *ngIf="!isWeapon && totalExtraOption < 3" [hidden]="totalExtraOption < 1">
          <p-cascadeSelect
            [(ngModel)]="option1Value"
            [disabled]="!itemId"
            [options]="optionList"
            optionValue="value"
            optionGroupLabel="label"
            optionLabel="label"
            [optionGroupChildren]="['children', 'children', 'children']"
            placeholder="Option 1"
            [showClear]="true"
            (onChange)="onOptionChange('option1Value', $event)"
            (onClear)="onOptionChange('option1Value', $event)"
          ></p-cascadeSelect>
        </div>
        <div class="col-span-4" *ngIf="!isWeapon && totalExtraOption < 3" [hidden]="totalExtraOption < 2">
          <p-cascadeSelect
            [(ngModel)]="option2Value"
            [disabled]="!itemId"
            [options]="optionList"
            optionValue="value"
            optionGroupLabel="label"
            optionLabel="label"
            [optionGroupChildren]="['children', 'children', 'children']"
            placeholder="Option 2"
            [showClear]="true"
            (onChange)="onOptionChange('option2Value', $event)"
            (onClear)="onOptionChange('option2Value', $event)"
          ></p-cascadeSelect>
        </div>

        <div class="col-span-12" [hidden]="(enchant2List.length === 0 && enchant3List.length === 0 && enchant4List.length === 0) || !itemId">
          <div class="grid grid-cols-12">
            <div class="col-span-4" [hidden]="enchant1List.length === 0">
              <p-select
                inputId="baseItemEnchant0"
                [autoDisplayFirst]="false"
                [resetFilterOnHide]="true"
                [options]="enchant1List"
                [filter]="true"
                filterBy="label"
                scrollHeight="350px"
                [(ngModel)]="enchant1Id"
                [showClear]="true"
                [disabled]="enchant1List.length === 0 || !itemId"
                (onChange)="onSelectItem('enchant1Id', $event.value)"
                placeholder="Enchant 1"
              >
                <ng-template let-item pTemplate="selectedItem">
                  <div class="flex gap-1 item_template" *ngIf="enchant1Id">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" class="item_img" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
                <ng-template let-item pTemplate="item">
                  <div class="flex gap-1">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" style="width: 19px" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
              </p-select>
            </div>
            <div class="col-span-4">
              <p-select
                inputId="baseItemEnchant1"
                [autoDisplayFirst]="false"
                [resetFilterOnHide]="true"
                [options]="enchant2List"
                [filter]="true"
                filterBy="label"
                scrollHeight="350px"
                [(ngModel)]="enchant2Id"
                [showClear]="true"
                [disabled]="enchant2List.length === 0 || !itemId"
                (onChange)="onSelectItem('enchant2Id', $event.value)"
                placeholder="Enchant 2"
              >
                <ng-template let-item pTemplate="selectedItem">
                  <div class="flex gap-1 item_template" *ngIf="enchant2Id">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" class="item_img" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
                <ng-template let-item pTemplate="item">
                  <div class="flex gap-1">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" style="width: 19px" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
              </p-select>
            </div>
            <div class="col-span-4">
              <p-select
                inputId="baseItemEnchant2"
                [autoDisplayFirst]="false"
                [resetFilterOnHide]="true"
                [options]="enchant3List"
                [filter]="true"
                filterBy="label"
                scrollHeight="350px"
                [(ngModel)]="enchant3Id"
                [showClear]="true"
                [disabled]="enchant3List.length === 0 || !itemId"
                (onChange)="onSelectItem('enchant3Id', $event.value)"
                placeholder="Enchant 3"
              >
                <ng-template let-item pTemplate="selectedItem">
                  <div class="flex gap-1 item_template" *ngIf="enchant3Id">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" class="item_img" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
                <ng-template let-item pTemplate="item">
                  <div class="flex gap-1">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" style="width: 19px" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
              </p-select>
            </div>
            <div class="col-span-4">
              <p-select
                inputId="baseItemEnchant3"
                [autoDisplayFirst]="false"
                [resetFilterOnHide]="true"
                [options]="enchant4List"
                [filter]="true"
                filterBy="label"
                scrollHeight="350px"
                [(ngModel)]="enchant4Id"
                [showClear]="true"
                [disabled]="enchant4List.length === 0 || !itemId"
                (onChange)="onSelectItem('enchant4Id', $event.value)"
                placeholder="Enchant 4"
              >
                <ng-template let-item pTemplate="selectedItem">
                  <div class="flex gap-1 item_template" *ngIf="enchant4Id">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" class="item_img" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
                <ng-template let-item pTemplate="item">
                  <div class="flex gap-1">
                    <img src="assets/demo/images/items/{{ item.value }}.png" alt="" style="width: 19px" />
                    <div>{{ item.label }}</div>
                  </div>
                </ng-template>
              </p-select>
            </div>
          </div>
        </div>

        <div class="col-span-12" *ngIf="isWeapon || totalExtraOption === 3">
          <div class="grid grid-cols-12">
            <div class="col-span-4" [hidden]="totalExtraOption < 1">
              <p-cascadeSelect
                [(ngModel)]="option1Value"
                [disabled]="!itemId"
                [options]="optionList"
                optionValue="value"
                optionGroupLabel="label"
                optionLabel="label"
                [optionGroupChildren]="['children', 'children', 'children']"
                placeholder="Option 1"
                [showClear]="true"
                (onChange)="onOptionChange('option1Value', $event)"
                (onClear)="onOptionChange('option1Value', $event)"
              ></p-cascadeSelect>
            </div>
            <div class="col-span-4" [hidden]="totalExtraOption < 2">
              <p-cascadeSelect
                [(ngModel)]="option2Value"
                [disabled]="!itemId"
                [options]="optionList"
                optionValue="value"
                optionGroupLabel="label"
                optionLabel="label"
                [optionGroupChildren]="['children', 'children', 'children']"
                placeholder="Option 2"
                [showClear]="true"
                (onChange)="onOptionChange('option2Value', $event)"
                (onClear)="onOptionChange('option2Value', $event)"
              ></p-cascadeSelect>
            </div>
            <div class="col-span-4" [hidden]="totalExtraOption < 3">
              <p-cascadeSelect
                [(ngModel)]="option3Value"
                [disabled]="!itemId"
                [options]="optionList"
                optionValue="value"
                optionGroupLabel="label"
                optionLabel="label"
                [optionGroupChildren]="['children', 'children', 'children']"
                placeholder="Option 3"
                [showClear]="true"
                (onChange)="onOptionChange('option3Value', $event)"
                (onClear)="onOptionChange('option3Value', $event)"
              ></p-cascadeSelect>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="grid grid-cols-12" *ngIf="isAccR">
    <div class="col-span-12 mb-8" [hidden]="!isEndWithSpace2"></div>
  </div>
</p-fluid>
